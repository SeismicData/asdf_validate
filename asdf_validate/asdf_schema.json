{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "type": "object",

  "definitions": {

    "scalar_data_space": {
      "type": "object",
      "description": "A scalar dataspace",
      "required": ["ScalarDataspace"],
      "properties": {
        "ScalarDataspace": {
          "type": "null"
        }
      }
    },

    "simple_1d_dataspace": {
      "type": "object",
      "description": "A simple one dimenstional dataspace",
      "required": ["SimpleDataspace"],
      "properties": {
        "SimpleDataspace": {
          "type": "object",
          "required": ["@Ndims", "Dimension"],
          "properties": {
            "@Ndims": {
              "type": "integer"},
            "Dimension": {
              "type": "object",
              "required": ["@MaxDimSize"],
              "properties": {
                "@MaxDimSize": {
                  "type": "string",
                  "enum": ["UNLIMITED"]
                }
              }
            }
          }
        }
      }
    },

    "byte_array_data_type": {
      "type": "object",
      "description": "Byte array data type used for XML documents in ASDF.",
      "required": ["IntegerType"],
      "properties": {
        "IntegerType": {
          "type": "object",
          "required": ["@ByteOrder", "@Sign", "@Size"],
          "properties": {
            "@ByteOrder": {
              "type": "string",
              "enum": ["LE", "BE"]},
            "@Sign": {
              "type": "boolean"
            },
            "@Size": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1
            }
          }
        }
      }
    },

    "xml_dataset_type": {
      "type": "object",
      "description": "The dataset type used for XML strings within ASDF.",
      "required": ["Dataspace", "DataType"],
      "properties": {
        "Dataspace": {"$ref": "#/definitions/simple_1d_dataspace"},
        "DataType": {"$ref": "#/definitions/byte_array_data_type"}
      }
    },

    "string_attribute_data_type": {
      "type": "object",
      "description": "The datatype of string attributes.",
      "properties": {
        "StringType": {
          "type": "object",
          "required": ["@Cset", "@StrSize", "@StrPad"],
          "properties": {
            "@Cset": {
              "type": "string",
              "description": "Force ASCII Strings.",
              "enum": ["H5T_CSET_ASCII"]
            },
            "@StrSize": {
              "type": "integer",
              "minimum": 1
            },
            "@StrPad": {
              "type": "string",
              "description": "Force zero padding.",
              "enum": ["H5T_STR_NULLPAD"]
            }
          }
        }
      }
    },

    "string_attribute": {
      "type": "object",
      "description": "ASDF string attribute including data space and type.",
      "properties": {
        "Dataspace": {"$ref": "#/definitions/scalar_data_space"},
        "DataType": {"$ref": "#/definitions/string_attribute_data_type"}
      }
    }
  },

  "properties": {
    "groups": {
      "type": "object",
      "properties": {
        "AuxiliaryData": {
          "type": "object",
          "properties": {
            "groups": {
              "type": "object",
              "properties": {
                "RandomArrays": {
                  "type": "object",
                  "properties": {
                    "datasets": {
                      "type": "object",
                      "properties": {
                        "example_array": {
                          "type": "object",
                          "properties": {
                            "Dataspace": {
                              "type": "object",
                              "properties": {
                                "SimpleDataspace": {
                                  "type": "object",
                                  "properties": {
                                    "@Ndims": {
                                      "type": "integer"
                                    },
                                    "Dimension": {
                                      "type": "object",
                                      "properties": {
                                        "@MaxDimSize": {
                                          "type": "string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "DataType": {
                              "type": "object",
                              "properties": {
                                "FloatType": {
                                  "type": "object",
                                  "properties": {
                                    "@ByteOrder": {
                                      "type": "string"
                                    },
                                    "@Size": {
                                      "type": "integer"
                                    },
                                    "@SignBitLocation": {
                                      "type": "string"
                                    },
                                    "@ExponentBits": {
                                      "type": "string"
                                    },
                                    "@ExponentLocation": {
                                      "type": "string"
                                    },
                                    "@MantissaBits": {
                                      "type": "string"
                                    },
                                    "@MantissaLocation": {
                                      "type": "string"
                                    }
                                  }
                                }
                              }
                            },
                            "attributes": {
                              "type": "object",
                              "properties": {
                                "b": {
                                  "type": "object",
                                  "properties": {
                                    "Dataspace": {
                                      "type": "object",
                                      "properties": {
                                        "ScalarDataspace": {
                                          "type": "null"
                                        }
                                      }
                                    },
                                    "DataType": {
                                      "type": "object",
                                      "properties": {
                                        "FloatType": {
                                          "type": "object",
                                          "properties": {
                                            "@ByteOrder": {
                                              "type": "string"
                                            },
                                            "@Size": {
                                              "type": "integer"
                                            },
                                            "@SignBitLocation": {
                                              "type": "string"
                                            },
                                            "@ExponentBits": {
                                              "type": "string"
                                            },
                                            "@ExponentLocation": {
                                              "type": "string"
                                            },
                                            "@MantissaBits": {
                                              "type": "string"
                                            },
                                            "@MantissaLocation": {
                                              "type": "string"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "a": {
                                  "type": "object",
                                  "properties": {
                                    "Dataspace": {
                                      "type": "object",
                                      "properties": {
                                        "ScalarDataspace": {
                                          "type": "null"
                                        }
                                      }
                                    },
                                    "DataType": {
                                      "type": "object",
                                      "properties": {
                                        "IntegerType": {
                                          "type": "object",
                                          "properties": {
                                            "@ByteOrder": {
                                              "type": "string"
                                            },
                                            "@Sign": {
                                              "type": "boolean"
                                            },
                                            "@Size": {
                                              "type": "integer"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "Waveforms": {
          "type": "object",
          "properties": {
            "groups": {
              "type": "object",
              "properties": {
                "IV.BOB": {
                  "type": "object",
                  "properties": {
                    "datasets": {
                      "type": "object",
                      "properties": {
                        "IV.BOB..BHZ__2014-04-04T01:47:38__2014-04-04T01:47:40__raw_recording": {
                          "type": "object",
                          "properties": {
                            "Dataspace": {
                              "type": "object",
                              "properties": {
                                "SimpleDataspace": {
                                  "type": "object",
                                  "properties": {
                                    "@Ndims": {
                                      "type": "integer"
                                    },
                                    "Dimension": {
                                      "type": "object",
                                      "properties": {
                                        "@MaxDimSize": {
                                          "type": "string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "DataType": {
                              "type": "object",
                              "properties": {
                                "IntegerType": {
                                  "type": "object",
                                  "properties": {
                                    "@ByteOrder": {
                                      "type": "string"
                                    },
                                    "@Sign": {
                                      "type": "boolean"
                                    },
                                    "@Size": {
                                      "type": "integer"
                                    }
                                  }
                                }
                              }
                            },
                            "attributes": {
                              "type": "object",
                              "properties": {
                                "event_id": {"$ref": "#/definitions/string_attribute"},
                                "focal_mechanism_id": {"$ref": "#/definitions/string_attribute"},
                                "magnitude_id": {"$ref": "#/definitions/string_attribute"},
                                "origin_id": {"$ref": "#/definitions/string_attribute"},
                                "sampling_rate": {
                                  "type": "object",
                                  "properties": {
                                    "Dataspace": {
                                      "type": "object",
                                      "properties": {
                                        "ScalarDataspace": {
                                          "type": "null"
                                        }
                                      }
                                    },
                                    "DataType": {
                                      "type": "object",
                                      "properties": {
                                        "FloatType": {
                                          "type": "object",
                                          "properties": {
                                            "@ByteOrder": {
                                              "type": "string"
                                            },
                                            "@Size": {
                                              "type": "integer"
                                            },
                                            "@SignBitLocation": {
                                              "type": "string"
                                            },
                                            "@ExponentBits": {
                                              "type": "string"
                                            },
                                            "@ExponentLocation": {
                                              "type": "string"
                                            },
                                            "@MantissaBits": {
                                              "type": "string"
                                            },
                                            "@MantissaLocation": {
                                              "type": "string"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "starttime": {
                                  "type": "object",
                                  "properties": {
                                    "Dataspace": {
                                      "type": "object",
                                      "properties": {
                                        "ScalarDataspace": {
                                          "type": "null"
                                        }
                                      }
                                    },
                                    "DataType": {
                                      "type": "object",
                                      "properties": {
                                        "IntegerType": {
                                          "type": "object",
                                          "properties": {
                                            "@ByteOrder": {
                                              "type": "string"
                                            },
                                            "@Sign": {
                                              "type": "boolean"
                                            },
                                            "@Size": {
                                              "type": "integer"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "StationXML": {"$ref": "#/definitions/xml_dataset_type"}
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "Provenance": {
          "type": "object",
          "properties": {}
        }
      }
    },
    "datasets": {
      "type": "object",
      "required": ["QuakeML"],
      "properties": {
        "QuakeML": {"$ref": "#/definitions/xml_dataset_type"}
      }
    },
    "attributes": {
      "type": "object",
      "required": ["file_format_version", "file_format"],
      "properties": {
        "file_format_version": {"$ref": "#/definitions/string_attribute"},
        "file_format": {"$ref": "#/definitions/string_attribute"}
      }
    }
  }
}
